(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{48778:function(e,t,r){Promise.resolve().then(r.t.bind(r,47960,23)),Promise.resolve().then(r.bind(r,46281)),Promise.resolve().then(r.bind(r,76476))},46281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return s}});var i=r(57437),n=r(2265),l=r(2141);let o=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[s,a]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),p=()=>"true"===localStorage.getItem("rememberMe"),h=()=>{localStorage.removeItem("rememberMe")};(0,n.useEffect)(()=>{let e=!0;(async()=>{var t;let{data:{session:r}}=await l.O.auth.getSession();if(r&&!p()){if(await l.O.auth.signOut(),h(),!e)return;a(null),u(null),d(!1);return}e&&(a(r),u(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),d(!1))})();let{data:{subscription:t}}=l.O.auth.onAuthStateChange((e,t)=>{var r;a(t),u(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),d(!1)});return()=>{e=!1,t.unsubscribe()}},[]);let I=async(e,t,r,i,n)=>{try{var o,u;let{data:s,error:a}=await l.O.auth.signUp({email:e,password:t,options:{data:{full_name:r,role:i,student_id:(null==n?void 0:n.studentId)||"",phone:(null==n?void 0:n.phone)||"",course:(null==n?void 0:n.course)||"",year_level:(null==n?void 0:n.yearLevel)||"",sport:(null==n?void 0:n.sport)||"",position:(null==n?void 0:n.position)||"",department:(null==n?void 0:n.department)||"",title:(null==n?void 0:n.title)||"",id_picture_url:(null==n?void 0:n.id_picture_url)||"",is_verified:null!==(o=null==n?void 0:n.is_verified)&&void 0!==o&&o}}});if(a)return console.error("Signup error:",a),{error:a};if(s.user&&n){let{error:e}=await l.O.from("users").update({student_id:n.studentId||null,phone:n.phone||null,course:n.course||null,year_level:n.yearLevel||null,sport:n.sport||null,position:n.position||null,department:n.department||null,title:n.title||null,id_picture_url:n.id_picture_url||null,is_verified:null!==(u=n.is_verified)&&void 0!==u&&u}).eq("id",s.user.id);e&&console.error("Error updating user profile:",e)}return{error:null}}catch(e){return console.error("Signup exception:",e),{error:e}}},v=async(e,t)=>{let r=e.name.split(".").pop(),i="".concat(t,".").concat(r),n="".concat(t,"/").concat(i),{error:o}=await l.O.storage.from("profile-pictures").upload(n,e,{cacheControl:"3600",upsert:!0});if(o)return{error:o};let{data:u}=l.O.storage.from("profile-pictures").getPublicUrl(n),{error:s}=await l.O.from("users").update({profile_picture_url:u.publicUrl}).eq("id",t);return{error:s,url:u.publicUrl}},m=async(e,t)=>{let{error:r}=await l.O.auth.signInWithPassword({email:e,password:t});return{error:r}},f=async()=>{h(),await l.O.auth.signOut()};return(0,i.jsx)(o.Provider,{value:{user:r,session:s,loading:c,signUp:I,signIn:m,signOut:f,uploadProfilePicture:v},children:t})}function s(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},76476:function(e,t,r){"use strict";r.d(t,{F:function(){return u},ThemeProvider:function(){return o}});var i=r(57437),n=r(2265);let l=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)("light");return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme");e&&o(e)},[]),(0,n.useEffect)(()=>{"dark"===r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",r)},[r]),(0,i.jsx)(l.Provider,{value:{theme:r,toggleTheme:()=>{o(e=>"light"===e?"dark":"light")}},children:t})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},2141:function(e,t,r){"use strict";let i;r.d(t,{O:function(){return i}});var n=r(39683);let l="https://tiykqhfutsspfkbradvr.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpeWtxaGZ1dHNzcGZrYnJhZHZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5OTEzOTcsImV4cCI6MjA3MzU2NzM5N30.cSJCT7xNH6-7zlZycmkLhNklWnESo5xpmY83UgSWZ_s";try{l&&o?i=(0,n.eI)(l,o):(console.warn("⚠️  Supabase environment variables are missing. The app may not function correctly."),i=(0,n.eI)("https://placeholder-project.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsYWNlaG9sZGVyLXByb2plY3QiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTY0NTc2ODAwMCwiZXhwIjo5OTk5OTk5OTk5fQ.placeholder"))}catch(e){console.error("Failed to create Supabase client:",e),i=(0,n.eI)("https://placeholder-project.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsYWNlaG9sZGVyLXByb2plY3QiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTY0NTc2ODAwMCwiZXhwIjo5OTk5OTk5OTk5fQ.placeholder")}},47960:function(){}},function(e){e.O(0,[587,683,971,117,744],function(){return e(e.s=48778)}),_N_E=e.O()}]);